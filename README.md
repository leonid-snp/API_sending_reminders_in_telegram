# Приложение для рассылки напоминаний клиентам в телеграмме

### Клонируйте репозиторий себе командой
- git clone git@github.com:leonid-snp/Habit_reminder.git

### Перейдите в проект командой
- cd Habit_reminder/

### Для работы с проектом необходимо установить все зависимости в файле [pyproject.toml](pyproject.toml) введите в терминал команду
- poetry install

### Перед запуском приложения примените все миграции командой
- python3 manage.py migrate

### Выполни команду в консоли для тестового заполнения баз-данных
- python3 manage.py loaddata db.json

### Для работы заполните файл [.env.exampl](.env.exampl) затем переименуйте его в [.env](.env)

### django_setting
- SECRET_KEY= секретный ключ от приложения django
- DEBUG= режим отладки включен или выключен булево значение

### bd_setting
POSTGRES_DB= имя базы данных
POSTGRES_USER= пользователь базы данных
POSTGRES_PASSWORD= пароль от базы данных
POSTGRES_HOST= хост
POSTGRES_PORT= порт

### tg_setting
TG_API_TOKEN= токен телеграмма

### celery_setting
CELERY_BROKER_URL= хост брокер для приложения celery
CELERY_RESULT_BACKEND= хост бекенда
CELERY_CACHE_BACKEND= хост кэша
CELERY_TASK_TRACK_STARTED= True

### # redis
- LOCATION=хост брокера редис

### Есть функционал отправки напоминаний
- создайте приложение телеграмм, наберите в поиске BotFather
- далее следуйте инструкциям по созданию бота
- получите телеграм токен
- получите chat_id, наберите в поиске Get My ID
- следуйте инструкциям
- запустите приложение телеграм
- заполните полученный токен в переменную окружения
- при регистрации укажите полученный chat_id в модель пользователя

### Чтобы запустить приложение в консоли введите команду
- python manage.py runserver

### Перейдите по ссылке в браузере для просмотра документации
- http://127.0.0.1:8000/redoc/

### Для запуска периодической задачи для рассылки сделайте следующе
- раз комментируйте код в [settings.py](config%2Fsettings.py) на 29 строчке
- введите команду в терминале
- python3 manage.py migrate

### Для запуска рассылки введите команду в терминале 
- celery -A config worker --beat --scheduler django --loglevel=info

### Для остановки рассылок введите команду в терминале
- ctrl+c

### Для выхода с сервера нажмите комбинацию клавиш в терминале
- ctrl+c